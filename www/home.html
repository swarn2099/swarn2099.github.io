<!DOCTYPE html>
<html>

<head>
  <!--Import Google Icon Font-->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
  <!--Import materialize.css-->
  <link type="text/css" rel="stylesheet" href="../css/materialize.min.css" media="screen,projection" />
  <link type="text/css" rel="stylesheet" href="../css/style.css" media="screen,projection" />
  <!--Let browser know website is optimized for mobile-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script type="text/javascript" src="../js/jquery-3.3.1.min.js"></script>
  <script type="text/javascript" src="../js/init.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-auth.js"></script>
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyCvM4gKXyUW58BrDOnqU3bJBGnCNiexCzI",
      authDomain: "marco-polo-c90db.firebaseapp.com",
      databaseURL: "https://marco-polo-c90db.firebaseio.com",
      projectId: "marco-polo-c90db",
      storageBucket: "marco-polo-c90db.appspot.com",
      messagingSenderId: "399167559169"
    };
    firebase.initializeApp(config);
  </script>
</head>

<ul id="slide-out" class="sidenav sidenav-fixed center"><br>
  <li><a href="home.html"><i class="material-icons small">home</i></a></li>
  <li><a href="add.html"><i class="material-icons small">add</i></a></li>
  <li><a href="manage.html"><i class="material-icons small">edit</i></a></li>
  <li><a href="#!"><i class="material-icons small">data_usage</i></a></li>
  <li><a href="#!" onclick="signOut()"><i class="material-icons small">hotel</i></a></li>
</ul>

<nav>
  <div class="nav-wrapper color-page3 black-text">
    <a href="home.html" class="brand-logo center"><span class="white-text text-lighten-2"><b>marco</b></span><span class="blue-text heavy">polo </span><span class="thin white-text hide-on-med-and-down">Pool</span></a>
    <a href="#" data-target="slide-out" class="sidenav-trigger"><i class="material-icons white-text">menu</i></a>
    <ul class="right hide-on-med-and-down black-text">
      <li>
        <a class="dropdown-trigger black-text" href="#!" data-target="dropdown1" id="welcomeMessage">
      </li>
      <ul id='dropdown1' class='dropdown-content'>
        <li><a href="#!">Account Help</a></li>
        <li><a href="#!" onclick="signOut()">Sign Out</a></li>
      </ul>
    </ul>
  </div>
</nav>

<body>
  <div class="section container">
    <div class="row">
      <div class="col s12 m6">
        <a href="add.html">
          <div class="card waves-effect waves-light" id="rcorners2">
            <div class="card-image">
              <img src="../img/event.jpg">
              <span class="card-title">Add Event</span>
            </div>
          </div>
        </a>
      </div>
      <div class="col s12 m6">
        <a href="manage.html">
          <div class="card waves-effect waves-light" id="rcorners2">
            <div class="card-image">
              <img src="../img/manage.jpeg">
              <span class="card-title">Manage Events</span>
            </div>
          </div>
      </div>
      </a>
    </div>
    <div class="row">
      <div class="col s12 m6">
        <div class="card waves-effect waves-light" id="rcorners2">
          <div class="card-image">
            <img src="../img/data.jpg">
            <span class="card-title">Real Time Data</span>
          </div>
        </div>
      </div>
      <div class="col s12 m6">
        <div class="card waves-effect waves-light" id="rcorners2">
          <div class="card-image">
            <img src="../img/contact.jpeg">
            <span class="card-title">Contact Traveler</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="centered">
  </div>
  <script>
    firebase.auth().onAuthStateChanged(function(user) {
      if (user) {
        // User is signed in.
        var displayName = user.displayName;
        var school = user.school;
        console.log(displayName);
        console.log(school);
        var welcome = document.getElementById("welcomeMessage");
        var welcomeMessage = '<span class="white-text">Welcome ' + displayName + '</span><i class="material-icons right white-text">arrow_drop_down</i></a>';
        welcome.innerHTML = welcomeMessage;
        M.toast({
          html: 'Welcome ' + displayName,
          classes: 'white black-text'
        });
        // ...
      } else {
        // User is signed out.
        // ...
      }
    });

    function signOut() {
      firebase.auth().signOut().then(function() {
        console.log('Signed Out');
        window.location.href = "../index.html";

      }, function(error) {
        console.error('Sign Out Error', error);
      });
    }
  </script>
  <!--JavaScript at end of body for optimized loading-->
  <script type="text/javascript" src="../js/materialize.min.js"></script>
</body>

</html>
